<div class="matches-container">
 

  <%# ======================================================================== %>
  <%# ATENÃ‡ÃƒO: As variÃ¡veis @matches_uninitiated e @matches_initiated devem ser %>
  <%# populadas no MatchesController conforme o cÃ³digo que enviei anteriormente. %>
  <%# ======================================================================== %>

  <%# ======================================================================== %>
  <%# 1. MATCHES NÃƒO INICIADOS (Topo, lado a lado com scroll horizontal) %>
  <%# ======================================================================== %>
  <% if @matches_uninitiated.present? %>
    <h2 class="section-title">Novos Matches</h2>
    <div class="matches-uninitiated-grid">
      <% @matches_uninitiated.each do |match| %>
        <% other = match.other_user(current_user) %>
        
        <div class="match-card-uninitiated">
          <%= link_to match_path(match) do %>
            <div class="match-avatar-container">
              <% if other.avatar.attached? %>
                <%= image_tag other.avatar, class: "match-avatar" %>
              <% else %>
                <div class="match-avatar-placeholder">
                  <%= other.display_name[0].upcase rescue "?" %>
                </div>
              <% end %>
            </div>
            <p class="match-name"><%= truncate(other.display_name, length: 8) %></p>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>

  <%# ======================================================================== %>
  <%# 2. CONVERSAS INICIADAS (Lista abaixo) %>
  <%# ======================================================================== %>
  <% if @matches_initiated.present? %>
    <h2 class="section-title">Conversas</h2>
    <div class="matches-initiated-list">
      <% @matches_initiated.each do |match| %>
        <% other = match.other_user(current_user) %>
        
        <%= link_to match_path(match), class: "conversation-item" do %>
          <%# Avatar %>
          <% if other.avatar.attached? %>
            <%= image_tag other.avatar, class: "conversation-avatar" %>
          <% else %>
            <div class="conversation-avatar-placeholder">
              <%= other.display_name[0].upcase rescue "?" %>
            </div>
          <% end %>
          
          <%# InformaÃ§Ãµes da Conversa %>
          <div class="conversation-info">
            <h3 class="conversation-name"><%= other.display_name %></h3>
            <%# Opcional: Adicionar a Ãºltima mensagem aqui se for fÃ¡cil de buscar %>
            <%# Se vocÃª tiver a Ãºltima mensagem disponÃ­vel, descomente o cÃ³digo abaixo %>
            <p class="last-message"><%= match.messages.last.content.truncate(50) if match.messages.any? %></p> 
            <%# <p class="last-message">Continue conversando...</p>  %>
          </div>
        <% end %>
      <% end %>
    </div>
  <% end %>

  <%# ======================================================================== %>
  <%# 3. MENSAGEM DE VAZIO (Se ambas as listas estiverem vazias) %>
  <%# ======================================================================== %>
  <% if @matches_uninitiated.blank? && @matches_initiated.blank? %>
    <div class="matches-empty">
      <div class="empty-icon">ðŸ’­</div>
      <h3 class="empty-title">VocÃª ainda nÃ£o tem nenhum match</h3>
      <p class="empty-text">Comece curtindo perfis para encontrar alguÃ©m interessante!</p>
      <%= link_to "Descobrir pessoas ðŸ”", discover_path, class: "btn-discover" %>
    </div>
  <% end %>
</div>
